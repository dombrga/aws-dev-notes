chapter 11 other aws services
11.1 cloudwatch
- monitoring service. Monitor health, performance
- can monitor compute, storage and content deliv, db and analytics services
- ec2, auto scaling groups, ebs, route53 health checks, lambda
- ebs vols, storage gateway, cloudfront
- dynamodb, elasticache, rds, redshift, elastic map reduce
- sns, sqs, api gateway, estimated aws charges
- cloudwatch agent to define own metrics
- cloudwatch logs to monitor os and app logs
ec2
- ec2 send health and perf metrics to cloudwatch. Metrics are stored indefi
- ec2 does not send os-level metrics. memory usage, processses, free disk space, cpu idle time.
metric frequency
- ec2 is every 5 mins. can be 1 min interval
- custom metrics. default 1 min interval. Can be 1 sec

- cloudwatchlogs can also monitor system and app logs
- near real time monitor for specific phrases, values or patterns
- uses cloudwatch agent
- track # of errors in app
- cloudwatch alarms. create alarm to monitor any cloudwatch metric

11.3 cloudwatch dashboards
- customize view
- can be multiregion
- remember to save dashboard

11.4 cloudwatch concepts
cloudwatch metrics
- metric is variable to monitor
- time ordered sequence published to cloudwatch
- each data pt has timestamp
- metric is defined by name, namespace and >= 0 dimensions
- namespace is a container for cloudwatch metrics. create own name space for custom metric
- you can send custom metrics from diff app to diff namespace
cloudwatch dimension
- dimension is like a filter. name/value pair
- instanceid
- provide aggregate
cloudwatch dashboards
- custom view, a homepage, like graph/visualization

11.5 cloudwatch vs cloudtrail
cloudtrail
- records user activity in aws account
- command line, aws cli, aws console
- creation, modification, deletion of resources (iam users, s3 bucks, etc)
- failed logins
- can view last 90 days of act
- cloudwatch is about performance and metrics, and logs (cloudwatch logs), alarms (cloudwatch alarms)
- cloudtrail records api calls in aws acct. Delivers log files containing api calls to s3 bu
- can be integrated with cloudwatchlogs. 
- can be used to monitor failed logins
- cloudtrail for audit trail

11.7 cloudwatch (cw) actions
- cloudwatch api supports different actions
- actions to publish, monitor, alert. For custom metric
- putmetricdata to publish metric data pt to cw. define name, namespace, value, timestamp
- putmetricalarm - creates alarm associated with a metric to alert if threshold is reached

11.8 cloudwatch logs insights
- interactive query and analysis for data stored in cw logs
- uses bespoke query lang
- to generate visualizations like bar, pie, etc
- when creating a Lambda func, log grp is auto created
- cw can send email notif thru SNS

11.10 eventbridge
- about event-driven archi.
- event is a change in state
- events generated by aws resources like aws config, cloudtrail, cloudwatch can be sent to event bridge. Event bridge can create rules to match events and route them to targets like ec2, Lambda
- also for scheduling events
- like cloudwatch events. But eventbridge is preferred because it has more features
- changes in either will appear in both consoles
- to trigger Lambda funcs, SQS notifs and sns

11.13 common sdk exceptions
- sdk exception is response to error that occured when processing an sdk or api req
BatchGetItem - returns details of >=1 item from dynamodb. up to 16mb data and up to 100 items. Otherwise, returns partial result and exception
- ValidationException - too many items for batchgetitem
- UnprocessedKeys - some items not processed. Reduce req size
- ProvisionedThroughputExceededException - exceeded throughput. Add capacity, dax
BatchWriteItem - put or deletes to dynamodb
- 16 mb of data, up to 25 put or del ops
- any failed ops, returns UnprocessedItems. Will need to retry
- provisionedthroughputexceededexception